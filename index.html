<!DOCTYPE html>
<html>
<head>
  <title>Termostat chart</title>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore.js"></script>
  <script type="text/javascript" src="https://code.jquery.com/jquery-2.2.0.min.js"></script>
  <script type="text/javascript" src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
  <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.9/angular.min.js"></script>
  <script type="text/javascript" src="js/lib/b64.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.6/d3.min.js"></script>
  <script type="text/javascript" src="js/lib/d3tip.js"></script>
  <link rel="stylesheet" type="text/css" href="css/site.css">
  <link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
</head>
<body ng-app='thermo'>
  <div class="container" ng-controller="testController">
    <div class="row">
      <div class="col-md-3">
        <div class="panel panel-default text-center">
          <div class="panel-body">
            <h3>Manual temperature:</h3>
            <arc-picker value="status.manual_temp" is-picker="true"></arc-picker>
          </div>
        </div>  
      </div>
      <div class="col-md-3">
        <div class="panel panel-default text-center">
          <div class="panel-body">
            <h3>Current temperature:</h3>
            <arc-picker value="status.temp" is-picker="false"></arc-picker>
          </div>
        </div>  
      </div>
    </div>
    

    <button class="btn btn-primary" type="button" ng-click="addChart()"><span class="glyphicon glyphicon-plus"></span>Add chart</button>
    <button class="btn btn-primary" ng-click="refresh()"><span class="glyphicon glyphicon-refresh"></span>Refresh</button>
    <button class="btn btn-danger" ng-click="save(data)"><span class="glyphicon glyphicon-floppy-disk"></span>Save</button>

    <div ng-repeat="(i, dayData) in dayData">
      <h4><button type="button" class="btn btn-xs btn-danger" ng-click="removeChart(i)"><span class="glyphicon glyphicon-trash" ng-click="removeChart(i)"></span></button> Chart {{i}}</h4>
      <chart day-data="dayData" status="status"></chart>
    </div>

    <h3>Status</h3>
    <table class="table">
      <tr>
        <th>key</th>
        <th>value</th>
      </tr>
      <tr ng-repeat="(key, value) in status">
        <td>{{key}}</td>
        <td>{{value}}</td>
      </tr>
    </table>

    <div class="form-inline">
      <div class="form-group">
        <label>Time offset:</label>
        <input class="form-control" ng-model="status.time_offset"></input>
        <button class="btn btn-primary" ng-click="setOffset(status.time_offset)"><span class="glyphicon glyphicon-floppy-disk"></span></button>      
      </div>
    </div>

    <button class="btn btn-primary" ng-click="toggleMode()">Set {{ (status.temperatureMode == 'automatic')?'manual':'automatic' }} mode</button>      
  </div>
  <script type="text/javascript" src="js/dataFunctions.js"></script>
  <script type="text/javascript" src="js/angular.js"></script>
  <script type="text/javascript" src="js/script.js"></script>    
  <script type="text/javascript" src="js/arcPicker.js"></script>
</body>
</html>
