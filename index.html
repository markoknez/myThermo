<!DOCTYPE html>
<html>
<head>
  <title>Termostat chart</title>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore.js"></script>
  <script type="text/javascript" src="https://code.jquery.com/jquery-2.2.0.min.js"></script>
  <script type="text/javascript" src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
  <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.9/angular.min.js"></script>
  <script type="text/javascript" src="js/lib/b64.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.6/d3.min.js"></script>
  <script type="text/javascript" src="js/lib/d3tip.js"></script>
  <script type="text/javascript" src="js/dictionary.js"></script>
  <link href='https://fonts.googleapis.com/css?family=Ubuntu:400,700|Maven+Pro:400,700' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
  <link rel="stylesheet" type="text/css" href="css/site.css">
  <link rel="stylesheet" type="text/css" href="css/weather-icons.css">
</head>
<body ng-app='thermo'>
  <div class="container" ng-controller="testController">
    <ul class="nav nav-tabs nav-justified">
      <li ng-class="{'active': activeTab === 'manual'}" ng-click="setMode('manual')" ><a href="#">Manual mode</a></li>
      <li ng-class="{'active': activeTab === 'automatic'}" ng-click="setMode('automatic')"><a href="#">Automatic mode</a></li>
      <li ng-class="{'active': activeTab === 'settings'}" ng-click="setMode('settings')"><a href="#">Settings</a></li>
    </ul>

    <div ng-show="activeTab === 'settings'">
      <div class="form-group">
        <label>Local city:</label>
        <input class="form-control" ng-model="weatherCity" placeholder="{{weatherCity}}"></input>
      </div>
      <h3>Status</h3>
      <table class="table">
        <tr ng-repeat="(key, value) in status">
          <td>{{key}}</td>
          <td>{{value}}</td>
        </tr>
      </table>

      <div class="form-inline">
        <div class="form-group">
          <label>Time offset:</label>
          <input class="form-control" ng-model="status.time_offset"/>
          <button class="btn btn-primary" ng-click="setOffset(status.time_offset)"><span class="glyphicon glyphicon-floppy-disk"></span></button>      
        </div>
      </div>
    </div>

    <div ng-show="activeTab === 'manual'">

      <style type="text/css">
        .test-div{     
          width: 945px;
          margin: 0 auto;
        }
        
        .test-div-in{                    
          height: 222px;
          margin: 250px auto 0px auto;
          text-align: center;
        }

        .row.forecast{
          position: relative;
          bottom: 0px;
          width: 500px;
          height: 222px;
          margin: 0 auto;          
        }

        .test-div .manual-picker {
          position: relative;
          top: -700px;
        }

        .forecast .thumbnail {
          border: none;
        }

        .forecast i {
          font-size: 40px;
        }
      </style>

      <div class="test-div">            
        <div class="test-div-in">

          <h1 class="text-center">Zagreb</h1>
          <h1><small>Current temp:</small> {{status.temp}}c</h1>
          <h1><small>Outside temp:</small> {{weather.condition.temp}}c</h1>


        </div>
        <div class="row forecast">
          <div class="col-xs-4 text-center" ng-repeat="condition in weather.forecast | limitTo: 3" style="z-index: -5">
            <div class="thumbnail">
              <h2><i class="wi" ng-class="'wi-yahoo-' + condition.code"></i></h2>
              <div class="caption">
                <h4>{{condition.text}}</h4>
                <p>{{condition.high}}/{{condition.low}}</p>     
              </div>
            </div>
          </div>
        </div>
        <arc-picker class="manual-picker" value="status.manual_temp" settings="{showValue: false, isPicker: true, width: 945, radius: 290, arcWidth: 50}"></arc-picker>
      </div>
    </div>

    <div ng-show="activeTab === 'automatic'">
      <button class="btn btn-primary" type="button" ng-click="addChart()"><span class="glyphicon glyphicon-plus"></span>Add chart</button>
      <button class="btn btn-primary" ng-click="refresh()"><span class="glyphicon glyphicon-refresh"></span>Refresh</button>
      <button class="btn btn-danger" ng-click="save(data)"><span class="glyphicon glyphicon-floppy-disk"></span>Save</button>

      <div ng-repeat="(i, dayData) in dayData">
        <h4><button type="button" class="btn btn-xs btn-danger" ng-click="removeChart(i)"><span class="glyphicon glyphicon-trash" ng-click="removeChart(i)"></span></button> Chart {{i}}</h4>
        <chart day-data="dayData" status="status"></chart>
      </div>      
    </div>

  </div>
  <svg width="0" height="0" visibility="hidden">
    <defs>
      <linearGradient id="gradient" x1="0%" y1="0%" x2="0%" y2="0px" gradientUnits="userSpaceOnUse">
        <stop offset="25%" class="chart-color-hot"></stop>
        <stop offset="50%" class="chart-color-medium"></stop>
        <stop offset="90%" class="chart-color-cold"></stop>
      </linearGradient>
    </defs>
  </svg>
  <script type="text/javascript" src="js/dataFunctions.js"></script>
  <script type="text/javascript" src="js/angular/main-controller.js"></script>
  <script type="text/javascript" src="js/angular/chart-directive.js"></script>
  <script type="text/javascript" src="js/angular/arcPicker-directive.js"></script>
  <script type="text/javascript" src="js/script.js"></script>    
  <script type="text/javascript" src="js/arcPicker.js"></script>
</body>
</html>
