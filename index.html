<!DOCTYPE html>
<html>
<head>
  <title>Termostat chart</title>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore.js"></script>
  <script type="text/javascript" src="https://code.jquery.com/jquery-2.2.0.min.js"></script>
  <script type="text/javascript" src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
  <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.9/angular.min.js"></script>
  <script type="text/javascript" src="js/lib/b64.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.6/d3.min.js"></script>
  <script type="text/javascript" src="js/lib/d3tip.js"></script>
  <link rel="stylesheet" type="text/css" href="css/site.css">
  <link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
</head>
<body ng-app='thermo'>      
  <div class="container" ng-controller="testController">
    <button class="btn bnt-primary" type="button" ng-click="addChart([])">Add chart</button>


    <div ng-repeat="(i, dayData) in dayData">
      <h4><span class="glyphicon glyphicon-trash" ng-click="removeChart(i)"></span> Chart {{i}}</h4>
      <chart day-data="dayData" status="status"></chart>
    </div>

    <h3>Status</h3>
    <table class="table">
      <tr>
        <th>key</th>
        <th>value</th>
      </tr>
      <tr ng-repeat="(key, value) in status">
        <td>{{key}}</td>
        <td>{{value}}</td>
      </tr>
    </table>

    <div class="form-inline">
      <div class="form-group">
        <label>Time offset:</label>
        <input class="form-control" ng-model="status.time_offset"></input>
        <button class="btn btn-primary" ng-click="setOffset(status.time_offset)"><span class="glyphicon glyphicon-floppy-disk"></span></button>      
      </div>
    </div>

    <div class="form-inline">
      <div class="form-group">
        <label>Manual temp:</label>
        <input class="form-control" ng-model="status.manual_temp"></input>
        <button class="btn btn-primary" ng-click="setManualTemp(status.manual_temp)"><span class="glyphicon glyphicon-floppy-disk"></span></button>
      </div>
    </div>

    <button class="btn btn-primary" ng-click="toggleMode()">Set {{ (status.temperatureMode == 'automatic')?'manual':'automatic' }} mode</button>      
    <button class="btn btn-primary" ng-click="refresh()"><span class="glyphicon glyphicon-refresh"></span>Refresh</button>
    <button class="btn btn-danger" ng-click="save(data)"><span class="glyphicon glyphicon-floppy-disk"></span>Save</button>

  </div>
  <script type="text/javascript" src="js/dataFunctions.js"></script>
  <script type="text/javascript" src="js/angular.js"></script>
  <script type="text/javascript" src="js/script.js"></script>    
</body>
</html>
